<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Word Guess Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 20px;
        }
        #board {
            display: grid;
            grid-template-columns: repeat(5, 50px);
            gap: 5px;
            margin-bottom: 20px;
        }
        .cell {
            width: 50px;
            height: 50px;
            border: 2px solid #ccc;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 24px;
            font-weight: bold;
            text-transform: uppercase;
        }
        .green { background-color: green; color: white; }
        .orange { background-color: orange; color: white; }
        .grey { background-color: grey; color: white; }
        #keyboard {
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            gap: 5px;
            max-width: 500px;
        }
        .key {
            padding: 10px;
            background-color: lightgray;
            border: none;
            font-size: 18px;
            cursor: pointer;
            text-transform: uppercase;
        }
    </style>
</head>
<body>

<h1>Word Guess Game</h1>
<div id="board"></div>
<div id="keyboard"></div>

<script>
    const targetWord = "apple";
    const board = document.getElementById("board");
    const keyboard = document.getElementById("keyboard");
    const keys = "abcdefghijklmnopqrstuvwxyz".split("");
    const maxRows = 6;
    let currentRow = 0;
    let currentGuess = "";

    // Initialize board
    for (let i = 0; i < maxRows * 5; i++) {
        const cell = document.createElement("div");
        cell.classList.add("cell");
        board.appendChild(cell);
    }

    // Initialize keyboard
    keys.forEach(letter => {
        const key = document.createElement("button");
        key.textContent = letter;
        key.classList.add("key");
        key.addEventListener("click", () => handleKey(letter));
        keyboard.appendChild(key);
    });

    // Add Enter & Backspace
    const enterKey = document.createElement("button");
    enterKey.textContent = "Enter";
    enterKey.classList.add("key");
    enterKey.addEventListener("click", checkGuess);
    keyboard.appendChild(enterKey);

    const backKey = document.createElement("button");
    backKey.textContent = "âŒ«";
    backKey.classList.add("key");
    backKey.addEventListener("click", backspace);
    keyboard.appendChild(backKey);

    function handleKey(letter) {
        if (currentGuess.length < 5) {
            currentGuess += letter;
            updateBoard();
        }
    }

    function backspace() {
        currentGuess = currentGuess.slice(0, -1);
        updateBoard();
    }

    function updateBoard() {
        const rowStart = currentRow * 5;
        for (let i = 0; i < 5; i++) {
            const cell = board.children[rowStart + i];
            cell.textContent = currentGuess[i] || "";
        }
    }

    function checkGuess() {
        if (currentGuess.length !== 5) return;
        const rowStart = currentRow * 5;

        for (let i = 0; i < 5; i++) {
            const cell = board.children[rowStart + i];
            const letter = currentGuess[i];

            if (letter === targetWord[i]) {
                cell.classList.add("green");
                colorKey(letter, "green");
            } else if (targetWord.includes(letter)) {
                cell.classList.add("orange");
                colorKey(letter, "orange");
            } else {
                cell.classList.add("grey");
                colorKey(letter, "grey");
            }
        }

        currentRow++;
        currentGuess = "";
    }

    function colorKey(letter, color) {
        const keyBtn = [...keyboard.children].find(k => k.textContent.toLowerCase() === letter);
        if (keyBtn) {
            // Priority: green > orange > grey
            const priority = { green: 3, orange: 2, grey: 1, lightgray: 0 };
            const currentColor = keyBtn.classList.contains("green") ? "green" :
                                 keyBtn.classList.contains("orange") ? "orange" :
                                 keyBtn.classList.contains("grey") ? "grey" : "lightgray";

            if (priority[color] > priority[currentColor]) {
                keyBtn.classList.remove("green", "orange", "grey");
                keyBtn.classList.add(color);
            }
        }
    }
</script>

</body>
</html>
